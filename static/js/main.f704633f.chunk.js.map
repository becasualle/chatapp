{"version":3,"sources":["components/ChatMessage.js","img/user.png","img/assistant.png","uitils/Message.js","components/InputBar.js","components/ChatRoom.js","App.js","index.js"],"names":["ChatMessage","text","type","avatar","className","src","alt","Message","this","id","Date","getTime","toString","InputBar","messages","setMessages","feedEnd","setLastUserMsg","useState","inputValue","setInputValue","useEffect","current","scrollIntoView","behavior","onSubmit","e","preventDefault","newMsg","value","onChange","target","placeholder","disabled","ChatRoom","useRef","map","msg","ref","App","localStorage","getItem","JSON","parse","cuid","setCuid","lastBotMsg","setLastBotMsg","lastUserMsg","countUserMessages","filter","length","url","urlType","buildFetchInput","inputType","fetchUrl","reqBody","uuid","euid","params","method","headers","body","stringify","fetchData","a","fetch","response","json","data","result","textValue","addBotMsg","setItem","onClick","clear","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f704633f.chunk.js","sourcesContent":["import React from 'react'\r\nimport userImg from '../img/user.png'\r\nimport assistantImg from '../img/assistant.png'\r\n\r\nconst ChatMessage = ({ text, type }) => {\r\n    const avatar = type === 'sent' ? userImg : assistantImg;\r\n\r\n    return (\r\n        <div className={`message ${type}`}>\r\n            <img src={avatar} alt=\"avatar\" />\r\n            <p>{text}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatMessage\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default class Message {\r\n    constructor(text, type) {\r\n        this.id = new Date().getTime().toString()\r\n        this.text = text;\r\n        this.type = type;\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { useState, useEffect } from 'react';\r\nimport Message from '../uitils/Message';\r\nimport { FaPaperPlane } from \"react-icons/fa\";\r\n\r\n\r\nconst InputBar = ({ messages, setMessages, feedEnd, setLastUserMsg }) => {\r\n    const [inputValue, setInputValue] = useState('');\r\n    // записываем значение ввода в поле сообщения в inputValue\r\n    const changeEventHandler = e => {\r\n        setInputValue(e.target.value);\r\n    }\r\n\r\n    // после отправки создаем новое сообщение, добавляем в messages, очищаем поле ввода, скроллим в конец\r\n    const sendMessageHandler = e => {\r\n        e.preventDefault();\r\n        const newMsg = new Message(inputValue, 'sent');\r\n        setMessages([...messages, newMsg]);\r\n        setLastUserMsg(newMsg.text);\r\n        setInputValue('');\r\n    }\r\n\r\n    useEffect(() => {\r\n        feedEnd.current.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages, feedEnd])\r\n\r\n    return (\r\n\r\n        <form onSubmit={sendMessageHandler}>\r\n            <input type=\"text\" value={inputValue} onChange={changeEventHandler} placeholder=\"спросите про LTE\" />\r\n            <button type=\"submit\" disabled={!inputValue}><FaPaperPlane /></button>\r\n        </form>\r\n\r\n    )\r\n}\r\n\r\nexport default InputBar\r\n","import React from 'react'\r\nimport { useRef } from 'react';\r\nimport ChatMessage from './ChatMessage';\r\nimport InputBar from './InputBar';\r\n\r\nconst ChatRoom = ({ messages, setMessages, setLastUserMsg }) => {\r\n    const feedEnd = useRef();\r\n    return (\r\n        <>\r\n            <main>\r\n                {messages && messages.map(msg => <ChatMessage key={msg.id} text={msg.text} type={msg.type} />)}\r\n                <span ref={feedEnd}></span>\r\n            </main>\r\n            <InputBar messages={messages} setMessages={setMessages} feedEnd={feedEnd} setLastUserMsg={setLastUserMsg} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChatRoom\r\n","import './App.css';\nimport { useState, useEffect } from 'react';\nimport ChatRoom from './components/ChatRoom';\nimport Message from './uitils/Message';\n\n// Подгружаем историю из локального хранилища\nconst getLocalMessages = () => {\n  let messages = localStorage.getItem('messages');\n  if (messages) {\n    return JSON.parse(localStorage.getItem('messages'))\n  } else {\n    return []\n  }\n}\n\nconst getLocalCuid = () => {\n  let cuid = localStorage.getItem('cuid');\n  if (cuid) {\n    return JSON.parse(localStorage.getItem('cuid'))\n  } else {\n    return ''\n  }\n}\n\nfunction App() {\n  const [messages, setMessages] = useState(getLocalMessages());\n  const [cuid, setCuid] = useState(getLocalCuid());\n  const [lastBotMsg, setLastBotMsg] = useState('');\n  const [lastUserMsg, setLastUserMsg] = useState('');\n  // это значение нужно нам для ответа каждый раз, когда пользователь вводит повторное сообщение. Используется в качестве зависимости в useEffect.\n  const countUserMessages = messages.filter(msg => msg.type === 'sent').length;\n\n  // данные для формирования запроса\n  const uuid = '772c9859-4dd3-4a0d-b87d-d76b9f43cfa4';\n  const euid = '00b2fcbe-f27f-437b-a0d5-91072d840ed3';\n  const url = 'https://biz.nanosemantics.ru/api/bat/nkd/json/Chat.';\n  // три типа методов \n  const urlType = {\n    init: 'init',\n    event: 'event',\n    request: 'request'\n  }\n  // в зависимости от метода конструируем ссылку и параметры POST-запроса: меняется body\n  const buildFetchInput = (inputType) => {\n    let fetchUrl = '';\n    let reqBody = {};\n\n    if (inputType === urlType.init) {\n      fetchUrl = url + urlType.init;\n      reqBody = { uuid }\n    } else if (inputType === urlType.event) {\n      fetchUrl = url + urlType.event;\n      reqBody = {\n        cuid,\n        euid\n      };\n    } else if (inputType === urlType.request) {\n      fetchUrl = url + urlType.request;\n      reqBody = {\n        cuid,\n        text: lastUserMsg\n      };\n    }\n\n    const params = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'text/plain'\n      },\n      body: JSON.stringify(reqBody)\n    }\n    return { fetchUrl, params }\n  }\n\n  // получаем данные от API и в зависимости от их типа обновляем стейты\n  const fetchData = async (inputType) => {\n    try {\n      const { fetchUrl, params } = buildFetchInput(inputType);\n      const response = await fetch(fetchUrl, params);\n      const data = await response.json();\n      // обновляем идентификатор чата когда происходит инициализация\n      if (inputType === urlType.init) {\n        setCuid(data.result.cuid)\n      }\n      // когда событие READY (приветственное сообщение) или метод REQUEST (ответ на запрос пользователя) - обновляем последнее сообщение\n      else {\n        // проверяем, если сервер вернул новый cuid - обновляем его везде. Если хотим, чтобы при этом очищался чат и история - нужно вызвать resetChat (не уверен, что так нужно, оставляю только обновление cuid)\n        urlType.request && data.result.cuid && data.result.cuid !== cuid && setCuid(data.result.cuid);\n        const textValue = data.result.text.value;\n        textValue && setLastBotMsg(textValue);\n        // отправляем сообщение от бота каждый раз, когда оно является приветственным или когда оно хранится в стейте. Это нужно, чтобы избежать дупликатов при обновлении страницы.\n        (lastBotMsg || textValue === 'Здравствуйте.') && addBotMsg(textValue);\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n  // добавляем сообщение от бота в наш список сообщений\n  const addBotMsg = (msg) => {\n    const newMsg = new Message(msg, 'received');\n    setMessages([...messages, newMsg]);\n  }\n  // перезапуск разговора в новой сессии с удалением истории текущего диалога\n  const resetChat = () => {\n    localStorage.clear();\n    setMessages([]);\n    setCuid('');\n    setLastBotMsg('');\n    setLastUserMsg('');\n    fetchData(urlType.init)\n  };\n  // получаем cuid при первом рендере (в случае, если у нас нет cuid в локальном хранилище)\n  useEffect(() => {\n    !cuid && fetchData(urlType.init)\n    // eslint-disable-next-line\n  }, []);\n  // получаем приветственное сообщение\n  useEffect(() => {\n    cuid && fetchData(urlType.event);\n    // eslint-disable-next-line\n  }, [cuid]);\n\n  // сохраняем последнее отправленное сообщение пользователя для формирования запроса на реакцию бота\n  // каждый раз, когда появляется пользовательское сообщение. Мы используем countUserMessages вместо lastUserMsg, чтобы обрабатывать повторные сообщения пользователя (3раза ввел lte = 3 раза получил ответы)\n  useEffect(() => {\n    fetchData(urlType.request);\n    // eslint-disable-next-line\n  }, [countUserMessages]);\n\n  useEffect(() => {\n    localStorage.setItem('messages', JSON.stringify(messages))\n  }, [messages])\n\n  useEffect(() => {\n    localStorage.setItem('cuid', JSON.stringify(cuid))\n  }, [cuid])\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h1>🤖💬</h1>\n        <button onClick={resetChat}>Очистить</button>\n      </header>\n      <section className='chatRoom'>\n        <ChatRoom messages={messages} setMessages={setMessages} setLastUserMsg={setLastUserMsg} />\n      </section>\n\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}